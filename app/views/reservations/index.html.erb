<div class="max-w-xl m-auto px-4">
    <h1 class="text-2xl mt-0 mb-0">Reservations Schedule</h1>
    <p class="text-sm text-grey-darker mb-2">
      This page was last updated at <%= printTime(Time.zone.now) %>
    </p>

  <div class="sm:p-0 md:p-10 mt-5 bg-white border border-grey-light rounded">

    <table style="width: 95%; margin-left: auto; margin-right: auto;">
      <thead>
        <tr>
          <th class="text-md m-auto w-3/12 text-left pl-2">Start Time</th>
          <th class="text-md m-auto w-6/12">Name</th>
          <th class="text-md m-auto w-3/12 text-right pr-5" colspan="1">Action</th>
        </tr>
      </thead>

      <tbody>
        <% @info.each do |time_slot, available, reservation| %>
          <tr class="even:bg-white odd:bg-gray-100">
            <td class="text-sm m-auto text-left pl-2 md:pl-8"><%= printTimeIndex(time_slot) %></td>
            <% if !available %>
              <% if author_of(reservation) %>
                <td class="text-sm text-center m-auto"><%= reservation.user.name %></td>
              <% else %>
                <td class="text-sm text-center m-auto"><%= reservation.user.name %></td>
              <% end %>
            <% else %>
              <td class=""></td>
            <% end %>
            <% if available %>
              <%= form_with(model: Reservation.new, local: true) do |form| %>
                <%= form.hidden_field :start, value: time_slot %>
                <td class="text-center m-auto text-right pr-2">
                  <button class="text-sm bg-transparent hover:bg-green-500 text-green-700 font-semibold hover:text-white py-2 px-2 border border-green-500 hover:border-transparent rounded mb-2 mt-2" type="submit">
                  Reserve
                  </button>
                </td>
              <% end %>
            <% elsif author_of(reservation) %>
              <td class="text-center m-auto text-right pr-2">
              <button class="text-sm bg-transparent hover:bg-red-500 text-red-700 font-semibold hover:text-white py-2 px-3 border border-red-500 hover:border-transparent rounded mb-2 mt-2" type="submit">
              <%= link_to 'Cancel', reservation, method: :delete, data: { confirm: 'Are you sure you want to cancel your reservation?' } %></td>
              </button>
            <% else %>
            <td class="text-center m-auto text-right pr-2">
              <button class="text-sm bg-transparent hover:bg-gray-500 text-gray-700 font-semibold hover:text-white py-2 px-4 border border-gray-500 hover:border-transparent rounded mb-2 mt-2" type="submit">
              <%= link_to 'Show', reservation %>
              </button>
            </td>
            <% end %>
          </tr>
        <% end %>
      </tbody>

    </table>
  </div>

    <br>
</div>
